<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>C 语言应试笔记 | 梦断代码</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="前言这是我在大一时 C 语言课程考试前总结的坑们，每次相关考试前都会复习一次。如果你发现可以补充的地方，欢迎评论。">
<meta property="og:type" content="article">
<meta property="og:title" content="C 语言应试笔记">
<meta property="og:url" content="http://blog.zhanghai.me/c-exam-notes/index.html">
<meta property="og:site_name" content="梦断代码">
<meta property="og:description" content="前言这是我在大一时 C 语言课程考试前总结的坑们，每次相关考试前都会复习一次。如果你发现可以补充的地方，欢迎评论。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2015-02-16T02:38:12.000Z">
<meta property="article:modified_time" content="2019-05-16T05:05:51.865Z">
<meta property="article:author" content="张海">
<meta property="article:tag" content="编程">
<meta property="article:tag" content="学业">
<meta property="article:tag" content="笔记">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="梦断代码" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-100427567-2', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->


<!-- Google Analytics 4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4PPR6NZGPK"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4PPR6NZGPK');
</script>
<!-- End Google Analytics 4 -->


<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div class="mobile-nav-panel">
  <i class="icon-reorder icon-large"></i>
</div>
<header id="header">
  <h1 class="blog-title">
    <a href="/">梦断代码</a>
  </h1>
  <nav class="nav">
    <ul>
      <li><a href="/">主页</a></li><li><a href="/archives">存档</a></li>
      <li><a id="nav-search-btn" class="nav-icon" title="搜索"></a></li>
      <li><a href="/atom.xml" id="nav-rss-link" class="nav-icon" title="RSS 订阅"></a></li>
    </ul>
  </nav>
  <div id="search-form-wrap">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.zhanghai.me"></form>
  </div>
</header>

    <section id="main">
      <article id="post-c-exam-notes" class="post">
  <header class="entry-meta-header">
    <span class="meta-elements date">
      <a href="/c-exam-notes/" class="article-date">
  <time datetime="2015-02-16T02:38:12.000Z" itemprop="datePublished">2月 15 2015</time>
</a>

    </span>
    <span class="meta-elements author">张海</span>
    <div class="commentscount">
      
        <a href="http://blog.zhanghai.me/c-exam-notes/#disqus_thread" class="article-comment-link">评论</a>
      
    </div>
  </header>
  

  <header class="entry-header">
    
  
    <h1 class="article-title entry-title" itemprop="name">
      C 语言应试笔记
    </h1>
  


  </header>
  <div class="entry-content">
    
      <h2 id="前言"><a href="# 前言" class="headerlink" title="前言"></a>前言 </h2><p> 这是我在大一时 C 语言课程考试前总结的坑们，每次相关考试前都会复习一次。如果你发现可以补充的地方，欢迎评论。</p>
<a id="more"></a>

<h2 id="正文"><a href="# 正文" class="headerlink" title="正文"></a>正文 </h2><blockquote class="callout"><div class="title"> 一言以概 </div> 任何看上去有简单答案的问题都藏有坑。</blockquote>

<p>看见定义变量，总是注意变量是否被初始化过。</p>
<p>注意 <code>if</code> 中的等号是 <code>=</code> 还是 <code>==</code>。</p>
<p><code>if</code> 语句没有花括号时只包含之后一行，如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition)</span><br><span class="line">    optionally_executed();</span><br><span class="line">    always_executed();</span><br></pre></td></tr></table></figure>

<p><code>if else</code>语句在没有花括号时，<code>else</code>总是匹配最近的<code>if</code>（Dangling Else），如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a)</span><br><span class="line">    <span class="keyword">if</span> (b) do_b();</span><br><span class="line"><span class="keyword">else</span> do_c();</span><br></pre></td></tr></table></figure>

<p>实际上是：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a) &#123;</span><br><span class="line">    <span class="keyword">if</span> (b) &#123;</span><br><span class="line">        do_b();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        do_c();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>switch</code>语句在缺少 <code>break</code> 时将 Fall through。</p>
<p>求值逻辑表达式时 <code> 真</code>为 <code>1</code>，<code> 假</code>为 <code>0</code>。 判断逻辑表达式时，<code> 非 0</code>为 <code> 真</code>，<code>0</code>为 <code> 假</code>。</p>
<p><code>true</code>、<code>false</code>、<code>TRUE</code>、<code>FALSE</code> 是合法的变量名，因为在 C 中它们不是关键字。</p>
<p><code>*p++</code>等价于 <code>*(p++)</code>，因后自增<code>++</code> 优先级高于解引用<code>*</code>。</p>
<p>注意整型除法结果被截断， <code>int n = 2; 1 / n == 0</code>。</p>
<p>注意本地变量需要初始化。</p>
<p>注意变量作用域屏蔽，如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123; <span class="keyword">int</span> a = <span class="number">0</span>, b = <span class="number">1</span>; &#125;</span><br></pre></td></tr></table></figure>

<p>注意函数为传值，指针也是值传递，例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> *b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> *temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>并不影响外部。</p>
<p>注意 <code>int</code> 溢出，若易发生溢出（如阶乘操作）应使用 <code>long</code> 或<code>double</code>代替。</p>
<p><code>char a = 255</code>，打印后值为 <code>-1</code>，因为 <code>char</code> 为有符号类型并采用补码表示，其范围为 <code>-128 ~ 127</code>。</p>
<p>负数的位移操作中符号位也参与位移；左操作数为负数的右移 <code>&gt;&gt;</code> 结果由实现定义，Turbo C 为补 1。</p>
<p><code>a/b</code>与 <code>a%b</code> 结果在 <code>a</code> 与<code>b</code>中有一个为负数时由实现定义，但保证 <code>a / b * b + a % b</code> 结果为<code>a</code>。</p>
<p>过滤回车结束的输入字符串：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> ((ch = getchar()) != <span class="string">'\n'</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (ch ...) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    str[i++] = ch;</span><br><span class="line">&#125;</span><br><span class="line">str[i] = <span class="string">'\0'</span>;</span><br></pre></td></tr></table></figure>

<p>C 语言二维数组存储采用 Row-major 方式，即在内存中存储为 row1, row2, row3…，初始化时必须给出列数以确定行中元素个数，静态变量中未初始化元素自动为 0，使用时可以将列数溢出到下一行，即偏移值计算为 row_count * row + column。</p>
<p>注意分号：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (...);</span><br><span class="line">            do_something();</span><br></pre></td></tr></table></figure>

<p><code>do_something</code>只执行一次。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">0</span>);</span><br><span class="line">    do_something();</span><br></pre></td></tr></table></figure>

<p><code>do_something</code>一定会被执行。</p>
<p><code>sizeof()</code>表达式的值在编译时确定。编译器不计算其中表达式的值，仅将其替换为对应类型。<code>sizeof</code>应用于数组时结果为 数组元素个数 * 元素大小，应用于指针时为指针变量长度（在 32 位机器上地址长度为 32，故值为 8；64 位机器上为 16）。</p>
<p>无论 <code>x</code> 是数组还是指针，在定义上编译器认为 <code>x[3]</code> 与<code>*(x+3)</code>是等价的。但根据 x 的类型是数组还是指针, 编译器将为 <code>x+3</code> 或<code>sizeof(x)</code>生成不同的代码。</p>
<p>类似 <code>char []</code> 类型的数组名被视为指向 <code>char</code> 的指针，<code>char[][]</code>也被视为指向 <code>char[]</code> 的指针。</p>
<p>注意 <code>&amp;&amp;</code> 或<code>||</code>具有 <code> 短路求值 </code> 特性，不会执行无必要求值的表达式。</p>
<p>注意含中文字符的文件应保存为 <code>GB*</code> 编码，例如<code>GB18030</code>。</p>
<p><code>strcpy(dst, src)</code>中目标在前，源在后。</p>
<p>注意 <code>int a, b, c</code>，<code>c = 2a + b</code> 非法（需要<code>*</code>）。</p>
<p>注意 <code>x&lt;=y&lt;=z</code> 意为<code>(x&lt;=y)&lt;=z</code>，意义非预期但合法。</p>
<p><code>scanf</code>遇到空白字符截止，为输入一行可使用 <code>scanf(&quot;[^\n]&quot;,str)</code> 或<code>gets()</code>。</p>
<p>注意：<code>scanf(&quot;%s&quot;, s)</code>输入 <code>&quot;How are you?&quot;</code> 遇到空格截断，只得到<code>How</code>。</p>
<p><code>strcpy(char *dst, char *src) {while(*dst++ = *src++); };</code>中 <code>++</code> 优先级高于<code>*</code></p>
<p><code>[]</code>、<code>()</code>优先级高于 <code>*</code>，故<code>int *array[1]</code> 等价于 <code>(int *)array[1]</code>，为 int 指针的数组；<code>int (*p)[1]</code> 为指向 <code>int</code> 数组的指针。</p>
<p>解读方法：以 <code>int **a[1][2]</code> 为例。从 a 出发，优先向右解读。（<a href="http://unixwiz.net/techtips/reading-cdecl.html" target="_blank" rel="noopener">来源</a>）</p>
<ol>
<li><code>a</code> is … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 <code>pointer</code>s to … <code>int</code></li>
<li><code>a</code> is <code>array</code> of 1 <code>array</code> of 2 <code>pointer</code>s to <code>poiner</code> to <code>int</code></li>
</ol>
<p>优先级：<em>后置自增 / 自减 <em>、函数调用、数组元素、结构成员 &gt; 前置自增 / 自减、正负、类型装换、</em> 解引用 *、取地址、数据类型大小、内存操作、（逻辑、位）非 &gt; 结构成员解引用 &gt; 乘除、取余 &gt; 加减 &gt; * 位移</em> &gt; 比较 &gt; 等价 &gt; （逻辑、位）与、或、异或 &gt; 三元条件、（复合）赋值。</p>
<p>字符串字面值与字符常量中转义序列 <code>\ddd</code> 可以为 1、2、3 位 8 进制数（0<del>7），上限为 377；<code>\xhh</code>可以为 1、2 位十六进制数（0</del>F）。</p>
<p>转义序列列表：</p>
<table>
<thead>
<tr>
<th>转移序列</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>\a</code></td>
<td><code>BEL</code></td>
</tr>
<tr>
<td><code>\b</code></td>
<td><code>BS</code></td>
</tr>
<tr>
<td><code>\f</code></td>
<td><code>FF</code></td>
</tr>
<tr>
<td><code>\n</code></td>
<td><code>LF</code></td>
</tr>
<tr>
<td><code>\r</code></td>
<td><code>CR</code></td>
</tr>
<tr>
<td><code>\t</code></td>
<td><code>HT</code></td>
</tr>
<tr>
<td><code>\v</code></td>
<td><code>VT</code></td>
</tr>
<tr>
<td><code>\\</code></td>
<td><code>\</code></td>
</tr>
<tr>
<td><code>\&#39;</code></td>
<td><code>&#39;</code></td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td><code>&quot;</code></td>
</tr>
<tr>
<td><code>\0</code></td>
<td><code>NULL</code></td>
</tr>
<tr>
<td><code>\ddd</code></td>
<td>八进制</td>
</tr>
<tr>
<td><code>\xhh</code></td>
<td>十六进制</td>
</tr>
</tbody></table>
<p>0~255 的数字也可以作为有效的字符取值。</p>
<p><code>int i = -1; printf(&quot;%d&quot;, (unsigned int)i);</code>打印出 <code>-1</code>，因为<code>%d</code> 为有符号整型。</p>
<p>使用草稿纸记录变量取值以计算程序输出，或对某些类型可理解程序意图猜测程序输出，或两者结合。</p>
<p><code>10^-6</code>表示为<code>1e-6</code>。</p>
<p>通过 <code>memset(array,0,sizeof(array))</code> 可以实现数组重初始化。（需要<code>string.h</code>）</p>
<p>宏 <code>#</code> 代表将此后的文本变为字符串；<code>##</code>代表连接文本；含有 <code>#</code> 与<code>##</code>的宏不进行参数展开，可利用包装宏展开。（<a href="http://learn.akae.cn/media/ch21s02.html" target="_blank" rel="noopener">参考</a>）</p>
<p>宏函数定义：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> func_name(var) \</span></span><br><span class="line"><span class="keyword">do</span> &#123; \</span><br><span class="line">    do_something(); \</span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>调用与函数调用一致：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func_name(var);</span><br></pre></td></tr></table></figure>

<p><code>scanf</code>中 <code>f</code> 为<code>float</code>，<code>lf</code>为 <code>double</code>；<code>printf</code> 中<code>f</code>为 <code>double</code>；<code>lf</code> 未定义。</p>
<p><code>,</code>逗号表达式对左侧表达式求值并丢弃返回值，之后对右侧表达式求值并返回其返回值。</p>
<p><code>#define SWAP(a,b) (a)^=(b)^=(a)^=(b)</code>可实现无临时变量的交换。</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>ASCII</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>48</td>
</tr>
<tr>
<td>A</td>
<td>65</td>
</tr>
<tr>
<td>a</td>
<td>97</td>
</tr>
</tbody></table>
<p>变量命名法则：<code>[A-Za-z_][A-Za-z0-9_]*</code>，且不含关键字。</p>
<p><code>auto</code>，<code>register</code>，<code>volatile</code>均为 C 关键字。</p>
<p><code>007</code>为八进制数字，注意范围为 <em>0-7</em>，<code>0x0F</code> 为十六进制数字。</p>
<p><code>strcat</code>实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">strcat</span><span class="params">(<span class="keyword">char</span> *str1, <span class="keyword">char</span> *str2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (*str &amp;&amp; *++str);</span><br><span class="line">    <span class="keyword">while</span> (*str1++ = *str2++);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote class="callout"><div class="title">相关阅读</div><a href="http://blog.yzyzsun.me/c-traps-and-pitfalls/" target="_blank" rel="noopener">《C 陷阱与缺陷》笔记 | 孙耀珠的博客</a></blockquote>

    
  </div>
  <footer class="entry-footer">
    <div class="entry-meta-footer">
      <span class="category">
        

      </span>
      <span class="tags">
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/schoolwork/" rel="tag">学业</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/note/" rel="tag">笔记</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/programming/" rel="tag">编程</a></li></ul>


      </span>
    </div>
  </footer>
  
    
<nav id="article-nav">
  
    <a href="/bash-scripting-notes/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          Bash Scripting Notes
        
      </div>
    </a>
  
  
    <a href="/qsc-mobile-android-v3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          求是潮手机站 Android 客户端 V3
        
      </div>
    </a>
  
</nav>


  
</article>




  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>
  </section>



    </section>
    <div class="mb-search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:blog.zhanghai.me">
    </form>
</div>
<footer id="footer">
  <h1 class="footer-blog-title">
    <a href="/">梦断代码</a>
  </h1>
  <span class="copyright">
    &copy; 2024 张海<br>
    Modify from <a href="http://sanographix.github.io/tumblr/apollo/" target="_blank">Apollo</a> theme, designed by <a href="http://www.sanographix.net/" target="_blank">SANOGRAPHIX.NET</a><br>
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </span>
</footer>

    
<script>
  var disqus_shortname = 'zhanghai';
  
  var disqus_url = 'http://blog.zhanghai.me/c-exam-notes/';
  
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>
